#!/bin/bash

LIBEXEC_DIR='@libexecdir@/hdfs-xrootd-healer'

export HADOOP_HOME=${HADOOP_HOME:-/usr/lib/hadoop}

# taken from /etc/default/hadoop-fuse, hard code for now
export LIBHDFS_OPTS="-Xms128m -Xmx512m"

# Pulls all jars from hadoop client package and conf files from HADOOP_CONF_DIR
for jar in ${HADOOP_HOME}/client/*.jar; do
  CLASSPATH+="$jar:"
done
CLASSPATH+="${HADOOP_CONF_DIR:-${HADOOP_HOME}/etc/hadoop}"

#OSG change: needed to pick up xml defaults
CLASSPATH="/etc/hadoop/conf:$CLASSPATH"

export CLASSPATH

exec ${LIBEXEC_DIR}/hcopy "$@"
